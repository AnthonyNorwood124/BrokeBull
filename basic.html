<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BrokeBull — Basic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase Compat (same as other pages) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>

</head>
<body>
  <header class="hero">
    <img class="logo" src="images/logo.jpg" alt="BrokeBull" />
    <h1>BrokeBull — Basic</h1>
    <div>
      <a class="btn" href="index.html">Home</a>
      <a class="btn" href="dashboard.html">Dashboard</a>
      <a class="btn" href="pro.html">Pro</a>
      <button class="btn" onclick="logout()">Logout</button>
    </div>
  </header>

  <div id="loading" style="color:#bbb;text-align:center;margin:24px 0;">Loading…</div>

  <main class="container" style="max-width:1100px;margin:0 auto;padding:20px;display:none;" id="content">
    <!-- Trending Stocks (TradingView Market Overview) -->
    <section>
      <h2>Trending Stocks</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
        {
          "colorTheme": "dark",
          "dateRange": "12M",
          "showChart": true,
          "locale": "en",
          "width": "100%",
          "height": "500",
          "largeChartUrl": "",
          "isTransparent": false,
          "tabs": [
            {
              "title": "US Stocks",
              "symbols": [
                {"s": "NASDAQ:AAPL", "d": "Apple"},
                {"s": "NASDAQ:NVDA", "d": "NVIDIA"},
                {"s": "NASDAQ:TSLA", "d": "Tesla"},
                {"s": "NASDAQ:MSFT", "d": "Microsoft"},
                {"s": "NYSE:PLTR", "d": "Palantir"},
                {"s": "NYSE:SHOP", "d": "Shopify"}
              ]
            },
            {
              "title": "ETFs",
              "symbols": [
                {"s": "AMEX:SPY", "d": "S&P 500"},
                {"s": "AMEX:QQQ", "d": "NASDAQ 100"},
                {"s": "AMEX:IWM", "d": "Russell 2000"}
              ]
            }
          ]
        }
        </script>
      </div>
    </section>

    <!-- Market News (TradingView Timeline) -->
    <section>
      <h2>Market News</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
        {
          "feedMode": "all_symbols",
          "isTransparent": false,
          "displayMode": "regular",
          "width": "100%",
          "height": "500",
          "colorTheme": "dark",
          "locale": "en"
        }
        </script>
      </div>
    </section>

    <!-- Newsletter CTA -->
    <section>
      <h2>Newsletter</h2>
      <p>Get the BrokeBull newsletter delivered daily.</p>
      <a class="btn" href="https://newsletter.brokebullinvestments.com/subscribe" target="_blank" rel="noopener">Subscribe on Beehiiv</a>
    </section>

    <!-- Weekly Economic Calendar (TradingView) -->
    <section>
      <h2>Economic Calendar</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
        {
          "width": "100%",
          "height": "500",
          "locale": "en",
          "importanceFilter": "-1,0,1",
          "colorTheme": "dark",
          "isTransparent": false
        }
        </script>
      </div>
    </section>
  </main>

  <script>
    // Require auth; show content once Firebase restores session.
    document.addEventListener('DOMContentLoaded', () => {
      const auth = firebase.auth();
      auth.onAuthStateChanged((user) => {
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        if (!user) {
          window.location.replace('login.html');
          return;
        }
        if (loading) loading.style.display = 'none';
        if (content) content.style.display = 'block';
      });
    });
  </script>
</body>
</html>
