<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BrokeBull — Basic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />

  <!-- De-tint hammer -->
  <style id="detint">
    body.plan-basic::before,
    body.plan-basic::after,
    body.plan-pro::before,
    body.plan-pro::after {
      display:none !important; content:'' !important; background:none !important; opacity:0 !important; filter:none !important;
    }
    body.plan-basic .hero { background: linear-gradient(140deg, #6c2eb8 0%, #2c0054 50%, #0f0f12 100%) !important; }
    .card, .panel { background:#121216 !important; backdrop-filter:none !important; -webkit-backdrop-filter:none !important; }
    [class*="overlay"], [class*="scrim"], [class*="veil"], [id*="overlay"], [id*="scrim"], [id*="veil"], [id*="preview"]{
      mix-blend-mode:normal !important; background:transparent !important; filter:none !important; opacity:1 !important; pointer-events:none !important;
    }
    [class*="overlay"]::before,[class*="overlay"]::after,[class*="scrim"]::before,[class*="scrim"]::after,[class*="veil"]::before,[class*="veil"]::after,[id*="overlay"]::before,[id*="overlay"]::after,[id*="preview"]::before,[id*="preview"]::after{
      content:none !important; background:transparent !important;
    }
  </style>

  <!-- Firebase Compat -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>
  <script src="firebase.js"></script>
</head>

<body class="plan-basic">
  <header class="hero">
    <img class="logo" src="images/logo.jpg" alt="BrokeBull" />
    <h1>BrokeBull — Basic</h1>
    <div>
      <a class="btn" href="index.html">Home</a>
      <a class="btn" href="pro.html">Pro</a>
      <button class="btn" onclick="logout()">Logout</button>
    </div>
  </header>

  <div id="loading" style="color:#bbb;text-align:center;margin:24px 0;">Loading…</div>

  <main id="content" class="container" style="max-width:1100px;margin:0 auto;padding:20px;display:none;">

    <!-- Ticker Tape -->
    <section>
      <div class="tradingview-widget-container" style="margin-bottom:16px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
        {
          "symbols":[{"proName":"AMEX:SPY","title":"SPY"},{"proName":"NASDAQ:QQQ","title":"QQQ"},{"proName":"AMEX:IWM","title":"IWM"},{"proName":"AMEX:DIA","title":"DIA"},{"proName":"NASDAQ:AAPL","title":"AAPL"},{"proName":"NASDAQ:MSFT","title":"MSFT"},{"proName":"NASDAQ:NVDA","title":"NVDA"},{"proName":"NASDAQ:TSLA","title":"TSLA"}],
          "showSymbolLogo":true,"isTransparent":false,"displayMode":"adaptive","colorTheme":"dark","locale":"en"
        }
        </script>
      </div>
    </section>

    <!-- Trending Stocks -->
    <section>
      <h2>Trending Stocks</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
        {
          "colorTheme":"dark","dateRange":"12M","showChart":true,"locale":"en","width":"100%","height":"500","largeChartUrl":"","isTransparent":false,
          "tabs":[
            {"title":"US Stocks","symbols":[{"s":"NASDAQ:AAPL","d":"Apple"},{"s":"NASDAQ:NVDA","d":"NVIDIA"},{"s":"NASDAQ:TSLA","d":"Tesla"},{"s":"NASDAQ:MSFT","d":"Microsoft"},{"s":"NYSE:PLTR","d":"Palantir"},{"s":"NYSE:SHOP","d":"Shopify"}]},
            {"title":"ETFs","symbols":[{"s":"AMEX:SPY","d":"S&P 500"},{"s":"AMEX:QQQ","d":"NASDAQ 100"},{"s":"AMEX:IWM","d":"Russell 2000"}]}
          ]
        }
        </script>
      </div>
    </section>

    <!-- Symbol Overview -->
    <section>
      <div class="tradingview-widget-container">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
        {"symbols":[["AMEX:SPY|1D"],["NASDAQ:QQQ|1D"],["AMEX:IWM|1D"]],"chartOnly":false,"width":"100%","height":"400","locale":"en","colorTheme":"dark","autosize":true,"showVolume":true}
        </script>
      </div>
    </section>

    <!-- Market News -->
    <section>
      <h2>Market News</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
        {"feedMode":"all_symbols","isTransparent":false,"displayMode":"regular","width":"100%","height":"500","colorTheme":"dark","locale":"en"}
        </script>
      </div>
    </section>

    <!-- Economic Calendar -->
    <section>
      <h2>Economic Calendar</h2>
      <div class="tradingview-widget-container" style="height:520px;">
        <div class="tradingview-widget-container__widget"></div>
        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
        {"width":"100%","height":"500","locale":"en","importanceFilter":"-1,0,1","colorTheme":"dark","isTransparent":false}
        </script>
      </div>
    </section>

    <!-- Newsletter CTA -->
    <section>
      <h2>Newsletter</h2>
      <p>Get the BrokeBull newsletter delivered daily.</p>
      <a class="btn" href="https://newsletter.brokebullinvestments.com/subscribe" target="_blank" rel="noopener">Subscribe on Beehiiv</a>
    </section>
  </main>

  <script>
    // Auth gate
    document.addEventListener('DOMContentLoaded', () => {
      const auth = firebase.auth();
      auth.onAuthStateChanged(user => {
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        if (!user) { window.location.replace('login.html'); return; }
        if (loading) loading.style.display = 'none';
        if (content) content.style.display = 'block';
      });
    });

    // Sweep any late-injected fullscreen dimmer
    window.addEventListener('load', () => {
      const sweep = () => {
        const nearFull = n => { const r = n.getBoundingClientRect(); return r.width >= innerWidth*0.9 && r.height >= innerHeight*0.9; };
        document.querySelectorAll('body *').forEach(n => {
          const s = getComputedStyle(n), bg = s.backgroundColor || '';
          const fixed = s.position === 'fixed';
          const semi  = (s.opacity && parseFloat(s.opacity) < 1) || (/rgba\(/.test(bg) && /, *0\.\d+\)/.test(bg));
          if (fixed && nearFull(n) && semi) { n.style.background='transparent'; n.style.opacity='1'; n.style.filter='none'; n.style.pointerEvents='none'; }
        });
      };
      sweep(); setTimeout(sweep, 400);
    });
  </script>
</body>
</html>
